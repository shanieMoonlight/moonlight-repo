<form
  class="update-self-form"
  [formGroup]="_form"
  [sbFormControlFirstError]="_form"
  (ngSubmit)="update()"
>
  <!-- Personal Information Section -->
  <div class="form-section">
    <h3>Personal Information</h3>
    <div class="form-row">
      <input
        hidden
        [id]="'id'"
        type="text"
        formControlName="id"
        placeholder="User ID"
        sbInputStyle
      />
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'firstName'">First Name</label>
        }
        <input
          [id]="'firstName'"
          type="text"
          formControlName="firstName"
          placeholder="First Name"
          sbInputStyle
        />
        <sb-first-error [control]="_form.controls.firstName" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'lastName'">Last Name</label>
        }
        <input
          [id]="'lastName'"
          type="text"
          formControlName="lastName"
          placeholder="Last Name"
          sbInputStyle
        />
        <sb-first-error [control]="_form.controls.lastName" />
      </div>
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'phoneNumber'">Phone Number</label>
        }
        <input
          [id]="'phoneNumber'"
          type="tel"
          formControlName="phoneNumber"
          placeholder="Phone Number"
          sbInputStyle
        />
        <sb-first-error [control]="_form.controls.phoneNumber" />
      </div>
    </div>
  </div>

  <!-- Account Information Section -->
  <div class="form-section">
    <h3>Account Information</h3>
    <div class="form-row">
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'username'">Username</label>
        }
        <input
          [id]="'username'"
          type="text"
          formControlName="userName"
          placeholder="Username"
          sbInputStyle
        />
        <sb-first-error [control]="_form.controls.userName" />
      </div>
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'email'">Email</label>
        }
        <input
          [id]="'email'"
          type="email"
          formControlName="email"
          placeholder="Email Address"
          sbInputStyle
        />
        <sb-first-error [control]="_form.controls.email" />
      </div>
    </div>
  </div>

  <!-- Security Settings Section -->
  @if (twoFactorProviderOptions(); as twoFactorProviderOptions) {
  <div class="form-section">
    <h3>Security Settings</h3>
    <div class="form-row">
      <div class="form-group">
        @if(showLabels()) {
        <label [for]="'twoFactorProvider'">2FA Method</label>
        }
        <sb-select
          [id]="'twoFactorProvider'"
          [options]="twoFactorProviderOptions"
          placeholder="Select 2FA method"
          formControlName="twoFactorProvider"
          color="primary"
        ></sb-select>
        <sb-first-error [control]="_form.controls.twoFactorProvider" />
      </div>
      <div class="form-group checkbox-group">
        <sb-checkbox formControlName="twoFactorEnabled" color="primary">
          Enable Two-Factor Authentication
        </sb-checkbox>
      </div>
    </div>
  </div>
  }

  <div class="form-actions">
    <sb-button type="submit" [disabled]="_form.invalid"> Update </sb-button>
  </div>
</form>
