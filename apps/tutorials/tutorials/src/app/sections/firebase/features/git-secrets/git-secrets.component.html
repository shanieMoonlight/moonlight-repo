<h1>Securely Using Firebase Config in GitHub Actions for Angular (and Similar Projects)</h1>
<p>This tutorial outlines the steps to securely inject your Firebase configuration into your application during a GitHub Actions build process,
    focusing on Angular's <code>environment.ts</code> files as an example. The goal is to avoid hardcoding sensitive Firebase configuration directly
    in your repository and instead use GitHub Secrets for secure management.</p>

<h2>Steps:</h2>

<div class="step">
    <h3>1. Define Firebase Configuration Secrets in GitHub</h3>
    <p>Go to your GitHub repository, then "Settings" -> "Secrets and variables" -> "Actions".</p>
    <ul>
        <li><strong>Decide on your secret naming convention.</strong> For a single Firebase app, you might use prefixes like <code>FIREBASE_</code>.
            For multiple apps, use app-specific prefixes (e.g., <code>APP_1_FIREBASE_</code>, <code>APP_2_FIREBASE_</code>).</li>
        <li>For each part of your Firebase configuration, create a new repository secret:
            <ul>
                <li><code>FIREBASE_API_KEY</code></li>
                <li><code>FIREBASE_AUTH_DOMAIN</code></li>
                <li><code>FIREBASE_PROJECT_ID</code></li>
                <li><code>FIREBASE_STORAGE_BUCKET</code></li>
                <li><code>FIREBASE_MESSAGING_SENDER_ID</code></li>
                <li><code>FIREBASE_APP_ID</code></li>
                <li><code>FIREBASE_MEASUREMENT_ID</code> (if applicable)</li>
            </ul>
        </li>
        <li><strong>If you are using GitHub Environments (e.g., "production", "staging"):</strong>
            <ul>
                <li>Navigate to "Settings" -> "Environments".</li>
                <li>Select your target environment.</li>
                <li>Add the Firebase secrets to the <strong>environment secrets</strong> section, using the same names and values. Secrets defined for
                    an environment are only accessible to jobs targeting that environment.</li>
            </ul>
        </li>
    </ul>
</div>

<div class="step">
    <h3>2. Modify Your GitHub Actions Workflow YAML</h3>
    <p>Open your workflow file (e.g., <code>.github/workflows/deploy.yml</code>) and find the job where you build your application. Add a step to
        create or modify your environment files.</p>
    <pre><code >
&#123;&#123;_gitAction()&#125;&#125;
    </code></pre>
</div>

<div class="step">
    <h3>3. Update Your Angular Code</h3>
    <p>In your <code>environment.ts</code> and <code>environment.prod.ts</code> files, the <code>environment</code> object will now have the
        <code>firebaseConfig</code> property. Import and use it in your Firebase initialization code.
    </p>
    <pre><code [highlight]="_appConfig()" language="typescript">
    </code></pre>
</div>

<h2>Gotchas and Important Reminders:</h2>
<ul>
    <li class="gotcha"><strong>Secret Naming:</strong> Be consistent with your secret naming conventions. Typos in secret names in your workflow YAML
        will result in empty values.</li>
    <li class="gotcha"><strong>Environment Paths:</strong> Ensure the <code>ENVIRONMENT_PATH</code> variable in your workflow correctly points to your
        Angular project's <code>environments</code> directory.</li>
    <li class="gotcha"><strong>Directory Creation:</strong> Use <code>mkdir -p</code> to ensure the <code>environments</code> directory exists before
        trying to write files into it.</li>
    <li class="gotcha"><strong>Accessing Secrets:</strong> Use the <code>$&#123; &#123; secrets.YOUR_SECRET_NAME &#125; &#125;</code> syntax in your
        workflow <code>run</code> blocks to access the values.</li>
    <li class="gotcha"><strong>GitHub Environments:</strong> If your job targets a specific GitHub Environment, the necessary secrets
        <strong>must</strong> be defined within that environment's settings. Repository-level secrets are not automatically available.
        <p>
            environment: production # &lt;---------- <strong>THIS IS IMPORTANT!</strong> must match the corresponding environment name in GitHub
        </p>
    </li>
    <li class="gotcha"><strong>Composite Actions:</strong> If your workflow uses a custom composite action, you cannot directly access secrets within
        it. You must pass the secrets as <code>inputs</code> to the composite action.</li>
    <li class="gotcha"><strong>Security:</strong> Never log or print the values of your secrets directly in your workflow logs. This could expose
        sensitive information.</li>
    <li class="gotcha"><strong>Build Configurations:</strong> Ensure your Angular build commands <code>npx ng build</code> use the appropriate
        configuration <code>--configuration=production</code> for production builds to utilize the correct environment file
        <code>environment.prod.ts</code>.
    </li>
    <li class="gotcha"><strong>Case Sensitivity:</strong> Remember that file paths and variable names in Linux-based GitHub Actions runners are
        case-sensitive.</li>
</ul>